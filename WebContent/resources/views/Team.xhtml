<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	  xmlns:jsf="http://xmlns.jcp.org/jsf">

	<h:head>
		<meta charset="UTF-8"/>
		<title>Team</title>
		<link rel="stylesheet" type="text/css" href="../styles/header.css"/>
		<link rel="stylesheet" type="text/css" href="../styles/content.css"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	</h:head>

	<body>
	
		<ui:include src="Header.xhtml"/>
		
<!-- 					Scripts				 		 -->


		
<!--                    Buttons                         -->
		
		<button type="button" class="greyButton" data-toggle="modal" data-target="#addTeamMember">Dodaj osobę</button>
		
        
<!--                     Modals                          -->

			<!-- Modal -->
			<div id="addTeamMember" class="modal fade" role="dialog">
			
			  <div class="modal-dialog">
			
			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <h4 class="modal-title">Osoba</h4>
			      </div>
			      
			      <h:form>
				      <div class="modal-body">
				      
				        <label for="name">Imię:</label>
						<h:inputText a:placeholder="Imię" value="#{teamMemberController.firstName}" class="form-control" id = "name"/>
				        
				        <label for="name">Nazwisko:</label>
						<h:inputText a:placeholder="Nazwisko" value="#{teamMemberController.lastName}" class="form-control" id = "lastName"/>
						
						<label for="name">Login:</label>
						<h:inputText a:placeholder="Login" value="#{teamMemberController.login}" class="form-control" id = "login"/>

						<label for="name">Hasło:</label>
						<h:inputText a:placeholder="Hasło" value="#{teamMemberController.password}" class="form-control" id = "password"/>	
							        
	
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        			        
				        <h:commandButton value="OK" type="submit" class ="btn btn-primary" action="#{teamMemberController.addTeamMember()}"/>

				      </div>
				      
			      </h:form>
			      
			    </div>
			
			  </div>
			</div>
			
			
			<!-- Modal -->
			<div id="editTeamMember" class="modal fade" role="dialog">
			
			  <div class="modal-dialog">
			
			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <h4 class="modal-title">Osoba</h4>
			      </div>
			      
			      <h:form id="editTeamMemberForm">
				      <div class="modal-body">
				      		        
				        <label for="name">Imię:</label>
						<h:inputText value="#{teamMemberController.selectedTeamMember.firstName}" class="form-control" id = "name">

						</h:inputText>
				        
				        <label for="name">Nazwisko:</label>
						<h:inputText value="#{teamMemberController.selectedTeamMember.lastName}" class="form-control" id = "lastName"/>
						
						<label for="name">Login:</label>
						<h:inputText value="#{teamMemberController.selectedTeamMember.login}" class="form-control" id = "login"/>
							        
	
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        			        
				        <h:commandButton value="OK" type="submit" class ="btn btn-primary" action="#{teamMemberController.updateTeamMember()}"/>

				      </div>
				  				      
			      </h:form>
			      
			    </div>
			
			  </div>
			  
			<!-- Script clears modal fields when closing the modal -->
			<script type="text/javascript">
					$('.modal').on('hidden.bs.modal', function () {
						 $('.modal-body').find("input", "inputText").val('').end();
						console.log("inputs cleared");
						});
			</script>	
			  
			</div>
			
			
			
<!--             DataTable                  -->

    	<h:form id = "tableForm">
    		<h:dataTable value="#{teamMemberController.teamMemberList}" var="t" class="table">

    			<h:column>
    				<!-- column header -->
    				<f:facet name="header">First name</f:facet>
    				#{t.firstName}
    			</h:column>
    			
    			<h:column>
    				<f:facet name="header">Last Name</f:facet>
    				#{t.lastName}
    			</h:column>
    			
    			<h:column>
    				<f:facet name="header">Login</f:facet>
    				#{t.login}
    			</h:column>
    			
    			<h:column>
    			    <f:facet name="header">Edytuj</f:facet>
    				<h:commandLink id="edit" onclick = "$('#editTeamMember').modal('show');">
    					<span class="glyphicon glyphicon-edit"></span>
    					<f:ajax render="editTeamMemberForm"/>
    					<f:setPropertyActionListener target = "#{teamMemberController.selectedTeamMember}" value = "#{t}" />
    				</h:commandLink>
				</h:column>
				
    			<h:column>
    			    <f:facet name="header">Usuń</f:facet>
    				<h:commandLink class = "glyphicon glyphicon-remove" id="remove" action="#{teamMemberController.deleteTeamMember(t)}" onclick="return confirm('Czy na pewno?')"/>
				</h:column>
				
    		</h:dataTable>
	   </h:form>
	
	</body>
	
</html>